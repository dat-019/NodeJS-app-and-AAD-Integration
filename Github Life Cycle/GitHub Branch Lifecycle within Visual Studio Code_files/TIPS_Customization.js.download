/* 
	Add Custom code to use JQuery to force external links to open in new window/tab
  
 This utility depents on the jquery plug-in. 
*/
(function () { 
     
    "use strict"; 
      
//     var URL_SUPERFISH_JS = "../scripts/superfish.min.js", 
//         LazyLoad = defineLazyLoad(); 
      
	(function () {         
		executeOrWaitUntilJQueryLoaded(function () {
			
			redefineExternalLinkClickEvent();
			
		}); 
	}()); 

     function executeOrWaitUntilJQueryLoaded(func) { 
         if (typeof $ === "function") { 
             func(); 
         } else { 
             setTimeout(function () { 
                 executeOrWaitUntilJQueryLoaded(func); 
             }, 30); 
         } 
     } 

     function redefineExternalLinkClickEvent() {
		$('body').delegate('a','click',function() {
			var homePath = window.location.pathname.split("/").filter(Boolean).slice(0,3).join("/");	//Get Location Path, split the elements, eliminate empty Strings, truncate at third element, rebuild as path
			var homeURLnPath = new RegExp('/' + window.location.host.toLowerCase() + '/' + homePath.toLowerCase());					// biuld string pattern for local domain and path for this site
			
			if(!homeURLnPath.test(this.href.toLowerCase())) {															//if the link for the Hyperlink click event is Not a local link,  Open is a new window.
				event.preventDefault();
				event.stopPropagation();
				window.open(this.href, '_blank', "scrollbars=1,resizable=1,width=1200,height=800");
			}
		 });
	 }

	 
}());	

